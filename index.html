<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ESP32-C3 WebServer</title>
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
</head>
<body>
    <h1>ESP32-C3 WebServer</h1>
    <img src="https://upload.wikimedia.org/wikipedia/commons/3/3e/ESP32.jpg" width="300">
    <br><br>
    <a href="/sensor">查看溫溼度</a>

    <h2>GPIO 控制</h2>
    <button onclick="gpio(2,1)">GPIO2 ON</button>
    <button onclick="gpio(2,0)">GPIO2 OFF</button>

    <script>
    const client = mqtt.connect("wss://b04357396fdc4b2f976f3ea149c6c19c.s1.eu.hivemq.cloud:8884/mqtt", {
        username: "esp32c3sm01",
        password: "aHt20262"
    });

    client.on("connect", () => console.log("MQTT WebSocket connected"));

    function gpio(pin,state){
        const msg = JSON.stringify({pin:pin,state:state});
        client.publish("esp32/gpio/control", msg);
    }
    </script>
</body>
</html>
